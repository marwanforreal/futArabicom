@model IEnumerable<futArabicom.Models.Player>

@{
    ViewData["Title"] = "الرئيسية";
    var count = 0;
}

@section scripts
    {
    <script src="~/lib//jquery/dist/jquery.min.js" type="text/javascript"></script>
    <script src="~/lib/jqueryui/jquery-ui.min.js" type="text/javascript"></script>
    <link href="~/lib/jqueryui/themes/base/jquery-ui.css"
          rel="Stylesheet" type="text/css" />

    <script type="text/javascript">
        $(function () {
            $("#txtSearch").autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: '/Home/AutoComplete/',
                        data: { "prefix": request.term },
                        type: "GET",
                        success: function (data) {
                            response($.map(data, function (item) {
                                return {
                                    label: item.name,
                                    value: item.id // Store the unique pageId for each item
                                };
                            }))
                        },
                        error: function (response) {
                            alert(response.responseText);
                        },
                        failure: function (response) {
                            alert(response.responseText);
                        }
                    });
                },
                select: function (e, i) {
                    //$("#hfCustomer").val(i.item.val);
                    //I don't know what this part does.

                    var pageId = i.item.value;
                    
                    window.location.href = '/pages/details?pageId=' + pageId;
                    console.log(e);
                    console.log(i);
                    console.log(pageId);
                    // Prevent the default behavior of selecting an item (which would populate the input field).
                    e.preventDefault();
                },
                minLength: 1
            });
        });
    </script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-99EE5098FH');
    </script>
    }

<div class="text-center">
    <img src="~/Images/Logo.png" class="rounded mx-auto d-block img-fluid" alt="FutArabi">
    @using (Html.BeginForm("Search", "Home", FormMethod.Post))
    {
         <div class="input-group mt-5">
            <input type="search" id="txtSearch" name="query" class="form-control rounded" placeholder="ابحث عن شركة, شخص,منظمة" aria-label="Search" aria-describedby="search-addon" />
            <button type="submit" class="btn btn-outline-primary">البحث</button>
          </div>
    }
    @if (!User.Identity.IsAuthenticated)
    {
        <p class="m-4">قاطع وتعرّف على أهم أسباب المقاطعة لكل شركة.</p>
    } else
    {
        <p class="m-4"> مرحباً بك <span class="text-primary">@User.Identity.Name</span></p>
    }

    <a href="https://moqate3.com/pages/index">
        <div class="alert alert-danger" role="alert">
            <b>اضغط هنا لمشاهدة قائمة الشركات المُقاطعة كاملة</b>
        </div>
    </a>


    <!-- Trending Players-->
    @if (Model != null)
    {
        <div class="container rounded-3 bg-richBlack pt-3 pb-3 shadow-lg">
            <div class="mb-3">
                <span class="display-4 bg-minionYellow-text">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-graph-up-arrow" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M0 0h1v15h15v1H0V0Zm10 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V4.9l-3.613 4.417a.5.5 0 0 1-.74.037L7.06 6.767l-3.656 5.027a.5.5 0 0 1-.808-.588l4-5.5a.5.5 0 0 1 .758-.06l2.609 2.61L13.445 4H10.5a.5.5 0 0 1-.5-.5Z" />
                    </svg>
                    الصفحات الشائعة
                </span>
                <span class="badge bg-info text-dark">بيتا</span>
            </div>
            <div class="row g-0">
                @foreach (var item in Model)
                {
                    <div class="col-6 col-md-2">
                        <a class="text-decoration-none" href="@Url.Action("Details", "Players", new PlayerDetailsViewModel { pageId = item.Id })">
                                <div class="card m-0 bg-richBlack on-hover">
                                @*<img id="trendingPlayerCard" src="@Url.Content("~/Images/" + item.Type + "Mini.png")" class="rounded mx-auto d-block position-relative" alt="FutArabi">*@
                                <div class="trending-cards">
                                    <img style="width:75%; right:14%; top:11%;" src="@ViewBag.imageUrls[count]" alt="image">
                                </div>
                                </div>
                        </a>
                    </div>
                    count++;
                }
            </div>
        </div>
    }
    <!-- End of Trending players-->

</div>

